"use strict";(self["webpackChunkidaas_admin"]=self["webpackChunkidaas_admin"]||[]).push([[222],{6837:function(e,t,n){n.d(t,{Pe:function(){return i},XP:function(){return o}});var a=n(3396),l=n(6534);const o=e=>{const t=e.reduce(((e,t)=>{let n=t.split("/"),o=n.pop()||"";return o&&(e[o]=n[0]?(0,a.Fl)((()=>l.Z.state[n[0]][o])):(0,a.Fl)((()=>l.Z.state[o]))),e}),{});return t},i=e=>{const t=e.reduce(((e,t)=>{let n=t,a=t.split("/").pop()||0;return a&&(e[a]=e=>l.Z.dispatch(n,e)),e}),{});return t}},7274:function(e,t,n){n.d(t,{A:function(){return a}});const a={inline:!0,rules:{},items:[{controlType:"input",keyName:"name",label:"关键字"}],btns:[{label:" ",eventName:"submit",text:"搜索",type:"primary"},{eventName:"reset",text:"重置",type:"primary"}]}},7862:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3396),l=n(4870),o=n(4386),i=n(508),s=(0,a.aZ)({__name:"addAndEditPublicModel",props:{value:Boolean,modelInfo:{reqired:!0,type:Object},modelType:{type:Number,default:1},modelOptions:{require:!0,type:Object},title:{type:String,default:"资源"}},emits:["update:modelValue","submitSuccss"],setup(e,{emit:t}){const n=e,{modelInfo:s}=(0,l.BK)(n);let r=(0,l.iH)();const d=()=>{r.value?.validate((e=>{console.log(e,"提交表单"),t("submitSuccss",e,n.modelType)}))},c=()=>{r.value.resetFields(),t("update:modelValue",!1)};return(t,n)=>((0,a.wg)(),(0,a.j4)(o.Z,(0,a.dG)(t.$attrs,{title:1!=e.modelType?`修改${e.title}`:`新增${e.title}`,onConfirmSubmit:d,onClosedModel:c}),{default:(0,a.w5)((()=>[(0,a.Wm)(i.Z,{ref_key:"formDOM",ref:r,options:e.modelOptions,formInfo:(0,l.SU)(s)},null,8,["options","formInfo"])])),_:1},16,["title"]))}});const r=s;var d=r},8222:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(4143),l=(n(7437),n(6355)),o=(n(3069),n(3209)),i=(n(6905),n(9971)),s=(n(1430),n(9007),n(5791)),r=(n(6809),n(3396)),d=n(7139),c=n(4870),p=n(508),u=n(7862),m=n(7178),y=n(2655),f=n(6837),g=n(7274),w=n(6766);const b={inline:!1,labelWidth:120,rules:{name:{required:!0},displayName:{required:!0},secret:{required:!0}},items:[{controlType:"input",keyName:"name",label:"Name"},{controlType:"input",keyName:"displayName",label:"DisplayName"},{controlType:"switch",keyName:"enabled",label:"Enabled"},{controlType:"input",keyName:"description",label:"Description"},{controlType:"switch",keyName:"required",label:"Required"},{controlType:"switch",keyName:"emphasize",label:"Emphasize"},{controlType:"switch",keyName:"showInDiscoveryDocument",label:"ShowInDiscoveryDocument"}]},k={class:"flex_space_between"},v=(0,r.Uk)("添加"),_={class:"container"},S={class:"container-body"},h={class:"container-content"},N={class:"content-table"},I=(0,r.Uk)("是"),U=(0,r.Uk)("否"),z=(0,r.Uk)("是"),W=(0,r.Uk)("否"),q=(0,r.Uk)("是"),T=(0,r.Uk)("否"),j=(0,r.Uk)("编辑 "),D=(0,r.Uk)("删除 "),C={class:"content-pagination"};var A=(0,r.aZ)({__name:"apiScope",setup(e){const t=["identity/getIdentApiScopeList","identity/editIdentApiScope","identity/addtIdentApiScope","identity/deleteIdentApiScope"],n=(0,f.Pe)(t),A=(0,c.qj)({pageNo:1,limit:0,pageSize:10,total:0});let Z=(0,c.qj)({name:""}),O=(0,c.iH)([]),x=(0,c.iH)(!1),$=(0,c.iH)(1),H=(0,c.iH)({id:"",name:"",displayName:"",enabled:!1,required:!1,emphasize:!1,description:"",showInDiscoveryDocument:!1});const R=()=>{let{pageNo:e,pageSize:t}=A;console.log(e,t,"页码"),E()},V=e=>{Object.keys(e).forEach((t=>{Z[t]=e[t]})),A.pageNo=1,E()},E=()=>{const e={filter:Z.name||null,pageIndex:A.pageNo,pageSize:A.pageSize};n.getIdentApiScopeList(e).then((e=>{O.value=e.data||[],A.total=e.totalCount,0===O.value.length&&A.pageNo>1&&(A.pageNo--,E())}))},P=e=>{$.value=2,x.value=!0,setTimeout((()=>H.value=(0,w.I8)(e)),0)},F=(e,t)=>{let a=(0,c.IU)(H.value),l=Object.keys(a).reduce(((t,n)=>(t[n]=e[n],t)),{});1===t&&delete l.id;const o=1===t?n.addtIdentApiScope:n.editIdentApiScope;o(l).then((e=>{(0,m.z8)({message:"操作成功",type:"success"}),x.value=!1,E()}))},K=e=>{y.T.confirm("是否要删除该identity资源？","提示",{type:"warning"}).then((()=>{n.deleteIdentApiScope({id:e}).then((()=>{(0,m.z8)({type:"success",message:"删除成功"}),E()}))})).catch((()=>({})))};return E(),(e,t)=>{const n=s.mi,m=o.$Y,y=i.Ks,f=o.eI,w=l.R,E=a.Kf;return(0,r.wg)(),(0,r.j4)(E,{class:"full_container"},{header:(0,r.w5)((()=>[(0,r._)("div",k,[(0,r._)("span",null,(0,d.zw)(e.$router.currentRoute.value.meta&&e.$router.currentRoute.value.meta.title||""),1),(0,r.Wm)(n,{type:"success",onClick:t[0]||(t[0]=e=>((0,c.dq)(x)?x.value=!0:x=!0,(0,c.dq)($)?$.value=1:$=1))},{default:(0,r.w5)((()=>[v])),_:1})])])),default:(0,r.w5)((()=>[(0,r._)("div",_,[(0,r.Wm)(p.Z,{formInfo:(0,c.SU)(Z),options:(0,c.SU)(g.A),onSubmit:V},null,8,["formInfo","options"]),(0,r._)("div",S,[(0,r._)("div",h,[(0,r._)("div",N,[(0,r.Wm)(f,{data:(0,c.SU)(O)},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{prop:"name",label:"Name","align-items":"center"}),(0,r.Wm)(m,{prop:"displayName",label:"DisplayName","align-items":"center"}),(0,r.Wm)(m,{label:"启用","align-items":"center"},{default:(0,r.w5)((e=>[e.row.enabled?((0,r.wg)(),(0,r.j4)(y,{key:0,type:"success"},{default:(0,r.w5)((()=>[I])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,type:"danger"},{default:(0,r.w5)((()=>[U])),_:1}))])),_:1}),(0,r.Wm)(m,{label:"Required","align-items":"center"},{default:(0,r.w5)((e=>[e.row.required?((0,r.wg)(),(0,r.j4)(y,{key:0,type:"success"},{default:(0,r.w5)((()=>[z])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,type:"danger"},{default:(0,r.w5)((()=>[W])),_:1}))])),_:1}),(0,r.Wm)(m,{prop:"description",label:"Description","align-items":"center"}),(0,r.Wm)(m,{label:"ShowInDiscovery","align-items":"center"},{default:(0,r.w5)((e=>[e.row.showInDiscoveryDocument?((0,r.wg)(),(0,r.j4)(y,{key:0,type:"success"},{default:(0,r.w5)((()=>[q])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,type:"danger"},{default:(0,r.w5)((()=>[T])),_:1}))])),_:1}),(0,r.Wm)(m,{label:"操作",width:"180","align-items":"center"},{default:(0,r.w5)((e=>[(0,r.Wm)(n,{type:"primary",onClick:t=>P(e.row),text:""},{default:(0,r.w5)((()=>[j])),_:2},1032,["onClick"]),(0,r.Wm)(n,{type:"danger",onClick:t=>K(e.row.id),text:""},{default:(0,r.w5)((()=>[D])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,r._)("div",C,[(0,r.Wm)(w,{class:"flex_all_center mt20","current-page":A.pageNo,"onUpdate:current-page":t[1]||(t[1]=e=>A.pageNo=e),"page-size":A.pageSize,"onUpdate:page-size":t[2]||(t[2]=e=>A.pageSize=e),background:"",layout:"sizes,prev, pager, next,total",total:A.total,onSizeChange:R,onCurrentChange:R},null,8,["current-page","page-size","total"])])])])]),(0,r.Wm)(u.Z,{modelValue:(0,c.SU)(x),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,c.dq)(x)?x.value=e:x=e),modelInfo:(0,c.SU)(H),modelType:(0,c.SU)($),modelOptions:(0,c.SU)(b),onSubmitSuccss:F},null,8,["modelValue","modelInfo","modelType","modelOptions"])])),_:1})}}});const Z=A;var O=Z},3069:function(e,t,n){n(1758),n(3877)}}]);
//# sourceMappingURL=222.a89955f9.js.map