"use strict";(self["webpackChunkidaas_admin"]=self["webpackChunkidaas_admin"]||[]).push([[798],{6837:function(e,t,a){a.d(t,{Pe:function(){return i},XP:function(){return o}});var n=a(3396),l=a(6534);const o=e=>{const t=e.reduce(((e,t)=>{let a=t.split("/"),o=a.pop()||"";return o&&(e[o]=a[0]?(0,n.Fl)((()=>l.Z.state[a[0]][o])):(0,n.Fl)((()=>l.Z.state[o]))),e}),{});return t},i=e=>{const t=e.reduce(((e,t)=>{let a=t,n=t.split("/").pop()||0;return n&&(e[n]=e=>l.Z.dispatch(a,e)),e}),{});return t}},7862:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(3396),l=a(4870),o=a(4386),i=a(508),r=(0,n.aZ)({__name:"addAndEditPublicModel",props:{value:Boolean,modelInfo:{reqired:!0,type:Object},modelType:{type:Number,default:1},modelOptions:{require:!0,type:Object},title:{type:String,default:"资源"}},emits:["update:modelValue","submitSuccss"],setup(e,{emit:t}){const a=e,{modelInfo:r}=(0,l.BK)(a);let s=(0,l.iH)();const d=()=>{s.value?.validate((e=>{console.log(e,"提交表单"),t("submitSuccss",e,a.modelType)}))},u=()=>{s.value.resetFields(),t("update:modelValue",!1)};return(t,a)=>((0,n.wg)(),(0,n.j4)(o.Z,(0,n.dG)(t.$attrs,{title:1!=e.modelType?`修改${e.title}`:`新增${e.title}`,onConfirmSubmit:d,onClosedModel:u}),{default:(0,n.w5)((()=>[(0,n.Wm)(i.Z,{ref_key:"formDOM",ref:s,options:e.modelOptions,formInfo:(0,l.SU)(r)},null,8,["options","formInfo"])])),_:1},16,["title"]))}});const s=r;var d=s},2798:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var n={};a.r(n),a.d(n,{AJ:function(){return w}});var l=a(4143),o=(a(7437),a(6355)),i=(a(3069),a(3209)),r=(a(6905),a(9971)),s=(a(1430),a(9007),a(5791)),d=(a(6809),a(3396)),u=a(7139),c=a(4870),p=a(508),m=a(7862),y=a(7178),g=a(2655),f=a(6837);const w={inline:!0,rules:{},items:[{controlType:"input",keyName:"name",label:"租户名"}],btns:[{eventName:"submit",text:"搜索",type:"primary"},{eventName:"reset",text:"重置",type:"primary"}]};var _=a(6766);const v={class:"flex_space_between"},k=(0,d.Uk)("添加"),b={class:"container"},h={class:"container-body"},I={class:"container-content"},S={class:"content-table"},U=(0,d.Uk)("是"),z=(0,d.Uk)("否"),W=(0,d.Uk)("是"),j=(0,d.Uk)("否"),N=(0,d.Uk)("是"),C=(0,d.Uk)("否"),q=(0,d.Uk)("是"),O=(0,d.Uk)("否"),Z=(0,d.Uk)("编辑 "),D=(0,d.Uk)("删除 "),T={class:"content-pagination"};var x=(0,d.aZ)({__name:"identityResource",setup(e){const t=["identity/getIdentityresourceList","identity/editIdentityresource","identity/addtIdentityresource","identity/deleteIdentityresource"],a=(0,f.Pe)(t),x=(0,c.qj)({pageNo:1,limit:0,pageSize:10,total:0});let $=(0,c.qj)({name:""}),H=(0,c.iH)([]),R=(0,c.iH)(!1),V=(0,c.iH)(1),F=(0,c.iH)({id:"",name:"",displayName:"",enabled:!1,description:"",required:!1,emphasize:!1,showInDiscoveryDocument:!1});const P=()=>{let{pageNo:e,pageSize:t}=x;console.log(e,t,"页码"),K()},E=e=>{Object.keys(e).forEach((t=>{$[t]=e[t]})),x.pageNo=1,K()},K=()=>{const e={filter:$.name||null,pageIndex:x.pageNo,pageSize:x.pageSize};a.getIdentityresourceList(e).then((e=>{H.value=e.data||[],x.total=e.totalCount,0===H.value.length&&x.pageNo>1&&(x.pageNo--,K())}))},M=e=>{V.value=2,R.value=!0,setTimeout((()=>F.value=(0,_.I8)(e)),0)},A=(e,t)=>{let n=(0,c.IU)(F.value),l=Object.keys(n).reduce(((t,a)=>(t[a]=e[a],t)),{});1===t&&delete l.id;const o=1===t?a.addtIdentityresource:a.editIdentityresource;o(l).then((e=>{(0,y.z8)({message:"操作成功",type:"success"}),R.value=!1,K()}))},B=e=>{console.log(e,"？？"),g.T.confirm("是否要删除该identity资源？","提示",{type:"warning"}).then((()=>{a.deleteIdentityresource({id:e}).then((()=>{(0,y.z8)({type:"success",message:"删除成功"}),K()}))})).catch((()=>({})))};return K(),(e,t)=>{const a=s.mi,y=i.$Y,g=r.Ks,f=i.eI,_=o.R,K=l.Kf;return(0,d.wg)(),(0,d.j4)(K,{class:"full_container"},{header:(0,d.w5)((()=>[(0,d._)("div",v,[(0,d._)("span",null,(0,u.zw)(e.$router.currentRoute.value.meta&&e.$router.currentRoute.value.meta.title||""),1),(0,d.Wm)(a,{type:"success",onClick:t[0]||(t[0]=e=>((0,c.dq)(R)?R.value=!0:R=!0,(0,c.dq)(V)?V.value=1:V=1))},{default:(0,d.w5)((()=>[k])),_:1})])])),default:(0,d.w5)((()=>[(0,d._)("div",b,[(0,d.Wm)(p.Z,{formInfo:(0,c.SU)($),options:(0,c.SU)(w),onSubmit:E},null,8,["formInfo","options"]),(0,d._)("div",h,[(0,d._)("div",I,[(0,d._)("div",S,[(0,d.Wm)(f,{data:(0,c.SU)(H)},{default:(0,d.w5)((()=>[(0,d.Wm)(y,{type:"index",width:"60",label:"序号"}),(0,d.Wm)(y,{prop:"name",label:"Name","header-align":"center"}),(0,d.Wm)(y,{prop:"displayName",label:"DisplayName","header-align":"center"}),(0,d.Wm)(y,{label:"启用","header-align":"center"},{default:(0,d.w5)((e=>[e.row.enabled?((0,d.wg)(),(0,d.j4)(g,{key:0,type:"success"},{default:(0,d.w5)((()=>[U])),_:1})):((0,d.wg)(),(0,d.j4)(g,{key:1,type:"danger"},{default:(0,d.w5)((()=>[z])),_:1}))])),_:1}),(0,d.Wm)(y,{prop:"description",label:"Description","header-align":"center"}),(0,d.Wm)(y,{label:"Required","header-align":"center"},{default:(0,d.w5)((e=>[e.row.required?((0,d.wg)(),(0,d.j4)(g,{key:0,type:"success"},{default:(0,d.w5)((()=>[W])),_:1})):((0,d.wg)(),(0,d.j4)(g,{key:1,type:"danger"},{default:(0,d.w5)((()=>[j])),_:1}))])),_:1}),(0,d.Wm)(y,{label:"Emphasize","header-align":"center"},{default:(0,d.w5)((e=>[e.row.emphasize?((0,d.wg)(),(0,d.j4)(g,{key:0,type:"success"},{default:(0,d.w5)((()=>[N])),_:1})):((0,d.wg)(),(0,d.j4)(g,{key:1,type:"danger"},{default:(0,d.w5)((()=>[C])),_:1}))])),_:1}),(0,d.Wm)(y,{label:"ShowInDiscovery","header-align":"center"},{default:(0,d.w5)((e=>[e.row.showInDiscoveryDocument?((0,d.wg)(),(0,d.j4)(g,{key:0,type:"success"},{default:(0,d.w5)((()=>[q])),_:1})):((0,d.wg)(),(0,d.j4)(g,{key:1,type:"danger"},{default:(0,d.w5)((()=>[O])),_:1}))])),_:1}),(0,d.Wm)(y,{label:"操作",width:"180","header-align":"center"},{default:(0,d.w5)((e=>[(0,d.Wm)(a,{size:"small",onClick:t=>M(e.row)},{default:(0,d.w5)((()=>[Z])),_:2},1032,["onClick"]),(0,d.Wm)(a,{class:"red",size:"small",onClick:t=>B(e.row.id)},{default:(0,d.w5)((()=>[D])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,d._)("div",T,[(0,d.Wm)(_,{class:"flex_all_center mt20","current-page":x.pageNo,"onUpdate:current-page":t[1]||(t[1]=e=>x.pageNo=e),"page-size":x.pageSize,"onUpdate:page-size":t[2]||(t[2]=e=>x.pageSize=e),background:"",layout:"sizes,prev, pager, next,total",total:x.total,onSizeChange:P,onCurrentChange:P},null,8,["current-page","page-size","total"])])])])]),(0,d.Wm)(m.Z,{modelValue:(0,c.SU)(R),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,c.dq)(R)?R.value=e:R=e),modelInfo:(0,c.SU)(F),modelType:(0,c.SU)(V),modelOptions:(0,c.SU)(n.addIdentityFormOptions),onSubmitSuccss:A},null,8,["modelValue","modelInfo","modelType","modelOptions"])])),_:1})}}});const $=x;var H=$},3069:function(e,t,a){a(1758),a(3877)}}]);
//# sourceMappingURL=798.1b56d4aa.js.map