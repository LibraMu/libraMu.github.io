"use strict";(self["webpackChunkidaas_admin"]=self["webpackChunkidaas_admin"]||[]).push([[406],{6837:function(e,o,l){l.d(o,{Pe:function(){return r},XP:function(){return n}});var t=l(3396),a=l(6534);const n=e=>{const o=e.reduce(((e,o)=>{let l=o.split("/"),n=l.pop()||"";return n&&(e[n]=l[0]?(0,t.Fl)((()=>a.Z.state[l[0]][n])):(0,t.Fl)((()=>a.Z.state[n]))),e}),{});return o},r=e=>{const o=e.reduce(((e,o)=>{let l=o,t=o.split("/").pop()||0;return t&&(e[t]=e=>a.Z.dispatch(l,e)),e}),{});return o}},1406:function(e,o,l){l.r(o),l.d(o,{default:function(){return Pe}});var t=l(4143),a=(l(7437),l(3209)),n=(l(6905),l(9007),l(5791)),r=(l(6809),l(3396)),u=l(7139);const i={class:"flex_space_between"},d=(0,r.Uk)("新增应用"),m=(0,r.Uk)("查看"),s=(0,r.Uk)("编辑"),c=(0,r.Uk)("授权管理"),p=(0,r.Uk)("角色管理"),f=(0,r.Uk)("资源管理");function h(e,o,l,h,w,v){const g=n.mi,b=a.$Y,y=a.eI,k=(0,r.up)("AddAndEditAppModel"),_=(0,r.up)("AuthManager"),C=(0,r.up)("ResourcesManager"),M=(0,r.up)("RoleManager"),S=t.Kf;return(0,r.wg)(),(0,r.j4)(S,{class:"full_container"},{header:(0,r.w5)((()=>[(0,r._)("div",i,[(0,r._)("span",null,(0,u.zw)(e.$router.currentRoute.value.meta&&e.$router.currentRoute.value.meta.title||""),1),(0,r.Wm)(g,{type:"success",onClick:o[0]||(o[0]=e=>h.addAndEditApp({},1))},{default:(0,r.w5)((()=>[d])),_:1})])])),default:(0,r.w5)((()=>[(0,r.Wm)(y,{data:h.tableData,border:!0},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{prop:"date",label:"应用名称"}),(0,r.Wm)(b,{prop:"name",label:"描述"}),(0,r.Wm)(b,{prop:"address",label:"appid"}),(0,r.Wm)(b,{prop:"address",label:"secret"}),(0,r.Wm)(b,{fixed:"right",label:"操作",width:"320"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(g,{link:"",type:"primary",size:"small",onClick:o=>h.submitInfo(e)},{default:(0,r.w5)((()=>[m])),_:2},1032,["onClick"]),(0,r.Wm)(g,{link:"",type:"primary",size:"small",onClick:o[1]||(o[1]=e=>h.addAndEditApp({appName:"微信办证"},2))},{default:(0,r.w5)((()=>[s])),_:1}),(0,r.Wm)(g,{link:"",type:"primary",size:"small",onClick:h.openAuthModel},{default:(0,r.w5)((()=>[c])),_:1},8,["onClick"]),(0,r.Wm)(g,{link:"",type:"primary",size:"small",onClick:h.openRoleModel},{default:(0,r.w5)((()=>[p])),_:1},8,["onClick"]),(0,r.Wm)(g,{link:"",type:"primary",size:"small",onClick:h.openResourcesModel},{default:(0,r.w5)((()=>[f])),_:1},8,["onClick"])])),_:1})])),_:1},8,["data"]),(0,r.Wm)(k,{modelValue:h.showEditModel,"onUpdate:modelValue":o[2]||(o[2]=e=>h.showEditModel=e),modelInfo:h.editFormInfo,modelType:h.modelType},null,8,["modelValue","modelInfo","modelType"]),(0,r.Wm)(_,{modelValue:h.showAuthModel,"onUpdate:modelValue":o[3]||(o[3]=e=>h.showAuthModel=e)},null,8,["modelValue"]),(0,r.Wm)(C,{modelValue:h.showResourcesModel,"onUpdate:modelValue":o[4]||(o[4]=e=>h.showResourcesModel=e)},null,8,["modelValue"]),(0,r.Wm)(M,{modelValue:h.showRoldModel,"onUpdate:modelValue":o[5]||(o[5]=e=>h.showRoldModel=e)},null,8,["modelValue"])])),_:1})}var w=l(4386);function v(e,o,l,t,a,n){const u=(0,r.up)("TempateForm"),i=w.Z;return(0,r.wg)(),(0,r.j4)(i,(0,r.dG)(e.$attrs,{title:1!=e.modelType?"修改应用":"新增应用",onConfirmSubmit:e.confirmSubmit,onClosedModel:e.closedModel}),{default:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"formDOM",options:e.formOptions,formInfo:e.modelInfo},null,8,["options","formInfo"])])),_:1},16,["title","onConfirmSubmit","onClosedModel"])}var g=l(508),b=l(4870);const y={inline:!1,rules:{nickname:{required:!0},passwrod:{required:!0}},items:[{controlType:"input",keyName:"appName",label:"应用名称"},{controlType:"input",keyName:"desc",label:"描述"}]};var k=(0,r.aZ)({components:{DrawerComponents:w.Z,TempateForm:g.Z},props:{value:Boolean,modelInfo:{reqired:!0,type:Object},modelType:{type:Number,default:1}},emits:["update:modelValue"],setup(e,{emit:o}){let l=(0,b.iH)(!1),t=(0,b.iH)();const{rules:a,items:n,...r}=y,u={...r,rules:{...a},items:[...n]},i=()=>{t.value?.validate((e=>{console.log(e,"提交表单")}))},d=()=>{t.value?.resetFields(),o("update:modelValue",!1)};return{showDrawer:l,formOptions:u,formDOM:t,confirmSubmit:i,closedModel:d}}}),_=l(89);const C=(0,_.Z)(k,[["render",v]]);var M=C,S=l(5065),W=(l(1758),l(8730)),D=(l(88),l(9971)),N=(l(1430),l(9242));const T={class:"control mb20"},R=(0,r.Uk)("添加父级资源"),V=(0,r.Uk)("导入父级路由"),I={class:"custom-tree-node"},U={class:"mr20"},A={key:0},H={class:"node_menu_content flex_column",ref:"tree_node_menu"},Z=(0,r.Uk)("新增子权限"),z=(0,r.Uk)("编辑权限"),E=(0,r.Uk)("删除该权限");function O(e,o,l,t,a,i){const d=n.mi,m=D.Ks,s=W.y,c=S.E2,p=(0,r.up)("AddAndEditResourcesModal"),f=(0,r.up)("AddParentRouterModal"),h=w.Z;return(0,r.wg)(),(0,r.j4)(h,(0,r.dG)(e.$attrs,{size:"50%",title:"资源管理",onConfirmSubmit:e.confirmSubmit,onClosedModel:e.closedModel}),{default:(0,r.w5)((()=>[(0,r._)("div",{class:"height100",onClick:o[5]||(o[5]=(...o)=>e.hideNodeMenu&&e.hideNodeMenu(...o))},[(0,r._)("div",T,[(0,r.Wm)(d,{type:"primary",onClick:o[0]||(o[0]=o=>e.openResourceDrawer(1))},{default:(0,r.w5)((()=>[R])),_:1}),(0,r.Wm)(d,{onClick:o[1]||(o[1]=o=>e.showParentDrawer=!0)},{default:(0,r.w5)((()=>[V])),_:1})]),(0,r.Wm)(s,{data:e.menuMergeResources,props:e.defaultProps,onNodeClick:e.hideNodeMenu,onNodeContextmenu:e.openNodeContextmenu},{default:(0,r.w5)((({node:e,data:o})=>[(0,r._)("span",I,[(0,r._)("span",U,(0,u.zw)(e.label),1),o.authName&&o.authName.length>0?((0,r.wg)(),(0,r.iD)("span",A,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.authName,(e=>((0,r.wg)(),(0,r.j4)(m,{class:"mr10",key:e,size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(e),1)])),_:2},1024)))),128))])):(0,r.kq)("",!0)])])),_:1},8,["data","props","onNodeClick","onNodeContextmenu"]),(0,r.wy)((0,r._)("div",H,[(0,r.Wm)(c,{type:"primary",onClick:o[2]||(o[2]=o=>e.openResourceDrawer(1,e.currentSelectNode))},{default:(0,r.w5)((()=>[Z])),_:1}),(0,r.Wm)(c,{onClick:o[3]||(o[3]=o=>e.openResourceDrawer(2,e.currentSelectNode))},{default:(0,r.w5)((()=>[z])),_:1}),(0,r.Wm)(c,{type:"danger",onClick:o[4]||(o[4]=o=>e.deleteAuthority(e.currentSelectNode))},{default:(0,r.w5)((()=>[E])),_:1})],512),[[N.F8,e.isShowTreeMenu]]),(0,r.Uk)(" "+(0,u.zw)(e.currentSelectNode),1)]),(0,r.Wm)(p,{modelValue:e.showEditDrawer,"onUpdate:modelValue":o[6]||(o[6]=o=>e.showEditDrawer=o),modelType:e.editType,modelInfo:e.editModelInfo,onSubmitSuccss:e.submitNodeEdit},null,8,["modelValue","modelType","modelInfo","onSubmitSuccss"]),(0,r.Wm)(f,{modelValue:e.showParentDrawer,"onUpdate:modelValue":o[7]||(o[7]=o=>e.showParentDrawer=o),onSubmitSuccss:e.importRouter},null,8,["modelValue","onSubmitSuccss"])])),_:1},16,["onConfirmSubmit","onClosedModel"])}function P(e,o,l,t,a,n){const u=(0,r.up)("TempateForm"),i=w.Z;return(0,r.wg)(),(0,r.j4)(i,(0,r.dG)(e.$attrs,{title:1===e.modelType?"增加资源":"修改资源",onConfirmSubmit:e.confirmSubmit,onClosedModel:e.closedModel}),{default:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"formDOM",options:e.formOptions,formInfo:e.modelInfo},null,8,["options","formInfo"])])),_:1},16,["title","onConfirmSubmit","onClosedModel"])}var x=(0,r.aZ)({components:{DrawerComponents:w.Z,TempateForm:g.Z},props:{value:Boolean,modelType:{type:Number,default:1},modelInfo:Object},emits:["update:modelValue","submitSuccss"],setup(e,{emit:o}){let{modelType:l}=(0,b.BK)(e),t=(0,b.iH)(!1),a=(0,b.iH)();const n=()=>{a.value.validate((e=>{o("submitSuccss",e,l.value)}))},r=()=>{a.value?.resetFields(),o("update:modelValue",!1)},u={inline:!1,rules:{title:{required:!0},name:{required:!0},menuType:{required:!0}},items:[{controlType:"input",keyName:"title",label:"资源名称"},{controlType:"input",keyName:"name",label:"资源标识"},{controlType:"radio",keyName:"menuType",label:"资源类型",options:[{label:"菜单",value:1},{label:"按钮",value:2}]},{controlType:"select",keyName:"authName",label:"关联权限",multiple:!0,filterable:!0,pleaceholader:"支持搜素",options:[{label:"userQuery",value:"userQuery"},{label:"userDelete",value:"userDelete"}]}]};return{showDrawer:t,formOptions:u,formDOM:a,confirmSubmit:n,closedModel:r}}});const F=(0,_.Z)(x,[["render",P]]);var j=F;function $(e,o,l,t,a,n){const u=(0,r.up)("TempateForm"),i=w.Z;return(0,r.wg)(),(0,r.j4)(i,(0,r.dG)(e.$attrs,{title:"添加父级路由",confirmText:"确认导入",onConfirmSubmit:e.confirmSubmit,onClosedModel:e.closedModel}),{default:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"formDOM",options:e.formOptions,formInfo:e.formData},null,8,["options","formInfo"])])),_:1},16,["onConfirmSubmit","onClosedModel"])}l(1703);var K=(0,r.aZ)({components:{DrawerComponents:w.Z,TempateForm:g.Z},props:{value:Boolean},emits:["update:modelValue","submitSuccss"],setup(e,{emit:o}){let l=(0,b.iH)(!1),t=(0,b.iH)({}),a=(0,b.iH)();const n=()=>{a.value.validate((e=>{let l=new Function("return "+e.router.replace(/(component.+)|(import.+)/gm,""))();o("submitSuccss",l),o("update:modelValue",!1)}))},r=()=>{a.value?.resetFields(),o("update:modelValue",!1)},u={inline:!1,rules:{router:{required:!0,validator:(e,o,l)=>{try{let e=o&&new Function("return "+o.replace(/(component.+)|(import.+)/gm,""))()||"";Array.isArray(e)?l():l(new Error("请输入JSON数组"))}catch{l(new Error("请输入JSON字符串"))}}}},items:[{controlType:"input",type:"textarea",rows:"10",keyName:"router",label:"路由集合"}]};return{showDrawer:l,formData:t,formOptions:u,formDOM:a,confirmSubmit:n,closedModel:r}}});const q=(0,_.Z)(K,[["render",$]]);var B=q,L=l(6837),Y=l(6766);let G;var X=(0,r.aZ)({components:{DrawerComponents:w.Z,AddAndEditResourcesModal:j,AddParentRouterModal:B},props:{value:Boolean,modelInfo:{reqired:!0,type:Object}},emits:["update:modelValue"],setup(e,{emit:o}){let l=(0,b.iH)(!1),t=(0,b.iH)({title:"",name:""}),a=(0,b.iH)(!1),n=(0,b.iH)([]),u=(0,b.iH)({}),i=(0,b.iH)(1),d=["resources/menuResources"],m=(0,L.XP)(d),{menuResources:s}=m;(0,r.YP)(s,(e=>n.value=(0,Y.I8)(e)),{immediate:!0}),(0,r.YP)(n,(e=>{const o=(e,l={},t=[])=>(e.forEach(((e,a)=>{if(e.parentIds=t.concat(a),!e.timeKey||!l[e.timeKey]){let o=`${Date.now()}_${e.name}`;e.timeKey=o,l[o]=e}e.children&&e.children.length>0&&o(e.children,l,e.parentIds.concat())})),l);u.value=o(e)}),{immediate:!0});const c=(0,b.iH)(!1),p=(0,b.iH)(),f=(0,b.iH)(),h={children:"children",label:"title"},w=(e,o)=>{let{clientX:l,clientY:t}=e;f.value.style.left=`${l+20}px`,f.value.style.top=`${t+10}px`,c.value=!0,p.value=o,document.addEventListener("click",v,{once:!0})},v=()=>c.value&&(c.value=!1),g=(e=G,o)=>{i.value=e,!o&&(p.value=null),l.value=!l.value,setTimeout((()=>{t.value=2===e&&o?(0,Y.I8)(o):{}}),0)},y=(e,o=G)=>{let t=p.value?u.value[p.value.timeKey]:null;if(1===o){let o=`${Date.now()}_${e.name}`,l={...e,timeKey:o};t&&p?(!t.children&&(p.value.children=[]),t.children.push(l)):n.value.push(l),u.value[o]=l}2===o&&(p.value=e,Object.keys(e).forEach((o=>"children"!=o&&(t[o]=e[o])))),l.value=!1},k=e=>{const o=(e,l=[])=>(e.forEach((e=>{let t={};e.name&&e.meta&&e.meta.title&&(t["name"]=e.name,t["title"]=e.meta.title,e.children&&e.children.length>0&&(t["children"]=o(e.children,[])),l.push(t))})),l);let l=o(e);n.value=n.value.concat(l)},_=e=>{const o=(e,l)=>{let t=e;if(l.length>1){let a=l.shift();t=e[a].children,o(t,l)}else 1===l.length&&t.splice(l[0],1)};o(n.value,e.parentIds)},C=()=>{let e=(0,Y.I8)((0,b.IU)(n.value));const o=(e,l=[])=>{if(0===e.length)return l;let t=e.shift();if(t){t.children&&t.children.length>0&&(t.children=o(t.children));let a=["title","name","children"].reduce(((e,o)=>(t&&void 0!==t[o]&&(e[o]="object"===typeof t[o]?(0,Y.I8)(t[o]):t[o]),e)),{});l.push(a),l=l.concat(o(e))}return l};console.log(o(e),"新数组")},M=()=>o("update:modelValue",!1);return{showEditDrawer:l,showParentDrawer:a,editType:i,defaultProps:h,isShowTreeMenu:c,currentSelectNode:p,tree_node_menu:f,menuMergeResources:n,editModelInfo:t,confirmSubmit:C,closedModel:M,openNodeContextmenu:w,openResourceDrawer:g,hideNodeMenu:v,submitNodeEdit:y,importRouter:k,deleteAuthority:_}}});const J=(0,_.Z)(X,[["render",O],["__scopeId","data-v-03e8880e"]]);var Q=J;const ee=(0,r.Uk)("添加角色"),oe=(0,r.Uk)("修改"),le=(0,r.Uk)("删除"),te=(0,r._)("div",null,null,-1);function ae(e,o,l,t,i,d){const m=n.mi,s=a.$Y,c=a.eI,p=(0,r.up)("AddAndEditRoleModal"),f=w.Z;return(0,r.wg)(),(0,r.j4)(f,(0,r.dG)(e.$attrs,{title:"角色管理",size:"60%",onClosedModel:o[4]||(o[4]=o=>e.$emit("update:modelValue",!1))}),{floor:(0,r.w5)((()=>[te])),default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"primary",onClick:o[0]||(o[0]=o=>e.openRoleModal(1))},{default:(0,r.w5)((()=>[ee])),_:1}),(0,r.Wm)(c,{data:e.roleList,border:!0},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{prop:"name",label:"角色名称"}),(0,r.Wm)(s,{prop:"key",label:"角色标识"}),(0,r.Wm)(s,{prop:"disabled",label:"是否启用"},{default:(0,r.w5)((({row:e})=>[(0,r.Uk)((0,u.zw)(e.disabled?"关闭":"开启"),1)])),_:1}),(0,r.Wm)(s,{fixed:"right",label:"操作",width:"320"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{link:"",type:"primary",size:"small",onClick:o[1]||(o[1]=o=>e.openRoleModal(2))},{default:(0,r.w5)((()=>[oe])),_:1}),(0,r.Wm)(m,{link:"",type:"danger",size:"small",onClick:o[2]||(o[2]=o=>e.deleteRole("key2"))},{default:(0,r.w5)((()=>[le])),_:1})])),_:1})])),_:1},8,["data"]),(0,r.Wm)(p,{modelValue:e.showDrawer,"onUpdate:modelValue":o[3]||(o[3]=o=>e.showDrawer=o),modelType:e.modelType,modelInfo:e.modelInfo,onSubmitSuccss:e.confirmSubmit},null,8,["modelValue","modelType","modelInfo","onSubmitSuccss"])])),_:1},16)}function ne(e,o,l,t,a,n){const u=(0,r.up)("TempateForm"),i=w.Z;return(0,r.wg)(),(0,r.j4)(i,(0,r.dG)(e.$attrs,{title:1===e.modelType?"添加角色":"修改角色",onConfirmSubmit:e.confirmSubmit,onClosedModel:e.closedModel}),{default:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"formDOM",options:e.formOptions,formInfo:e.modelInfo},null,8,["options","formInfo"])])),_:1},16,["title","onConfirmSubmit","onClosedModel"])}var re=(0,r.aZ)({components:{DrawerComponents:w.Z,TempateForm:g.Z},props:{value:Boolean,modelType:{type:Number,default:1},modelInfo:Object},emits:["update:modelValue","submitSuccss"],setup(e,{emit:o}){let{modelType:l}=(0,b.BK)(e),t=(0,b.iH)(!1),a=(0,b.iH)();const n=()=>a.value.validate((e=>o("submitSuccss",e,l.value))),r=()=>{a.value?.resetFields(),o("update:modelValue",!1)},u={inline:!1,rules:{name:{required:!0},key:{required:!0}},items:[{controlType:"input",keyName:"name",label:"角色名称"},{controlType:"input",keyName:"key",label:"角色标识"},{controlType:"switch",keyName:"disabled",label:"是否启用"}]};return{showDrawer:t,formOptions:u,formDOM:a,confirmSubmit:n,closedModel:r}}});const ue=(0,_.Z)(re,[["render",ne]]);var ie=ue,de=l(2655),me=l(7178),se=(0,r.aZ)({components:{DrawerComponents:w.Z,AddAndEditRoleModal:ie},props:{value:Boolean},emits:["update:modelValue"],setup(e,{emit:o}){let l=(0,b.iH)(!1),t=(0,b.iH)(1),a=(0,b.iH)({}),n=((0,b.iH)([]),["role/roleList"]),r=(0,L.XP)(n);const u=(e,o)=>{t.value=e,2==e&&(a=o),l.value=!l.value},i=(e,o)=>{console.log(e,o,"结果类型")},d=e=>{de.T.confirm("确定删除该角色吗？","提示",{type:"warning"}).then((()=>{(0,me.z8)({type:"success",message:"Delete completed"})})).catch((()=>({})))};return{showDrawer:l,modelType:t,modelInfo:a,roleList:r.roleList,...r,confirmSubmit:i,openRoleModal:u,deleteRole:d}}});const ce=(0,_.Z)(se,[["render",ae]]);var pe=ce,fe=l(9776),he=l(4902),we=l(6355),ve=(l(3069),l(1015)),ge=l(3417),be=(l(172),l(1853));const ye=e=>((0,r.dD)("data-v-52da2554"),e=e(),(0,r.Cn)(),e),ke={key:0},_e=ye((()=>(0,r._)("span",null,"账户列表",-1))),Ce=["onClick"];function Me(e,o,l,a,i,d){const m=be.p8,s=be.Ub,c=n.mi,p=ge.EZ,f=(0,r.up)("ArrowRight"),h=ve.gn,v=we.R,g=t.Kf,b=he.Dv,y=(0,r.up)("RoleAuthBeUserModelVue"),k=W.y,_=fe.dq,C=w.Z;return(0,r.wg)(),(0,r.j4)(C,(0,r.dG)(e.$attrs,{title:"授权管理",size:"80%",onConfirmSubmit:e.confirmSubmit,onClosedModel:o[5]||(o[5]=o=>e.$emit("update:modelValue",!1))}),{floor:(0,r.w5)((()=>["authUser"==e.activeRoleTabName&&"second"==e.activeName?((0,r.wg)(),(0,r.iD)("div",ke)):(0,r.kq)("",!0)])),default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:e.activeName,"onUpdate:modelValue":o[0]||(o[0]=o=>e.activeName=o)},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{label:"按人授权",name:"people"}),(0,r.Wm)(m,{label:"按角色授权",name:"second"})])),_:1},8,["modelValue"]),(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{span:8},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{class:"box-card"},{header:(0,r.w5)((()=>[_e])),default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"mb20",placeholder:"请输入内容",modelValue:e.searchValue,"onUpdate:modelValue":o[1]||(o[1]=o=>e.searchValue=o),onKeydown:(0,N.D2)(e.searchContent,["enter"])},{append:(0,r.w5)((()=>[(0,r.Wm)(c,{icon:e.Search,onClick:e.searchContent},null,8,["icon","onClick"])])),_:1},8,["modelValue","onKeydown"]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.currentSideList,((o,l)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,u.C_)(["list_item flex_space_between",e.currentSeleteName==o.name&&"tree_node_active"]),key:l,onClick:l=>e.getRelevantAuthList(o.name)},[(0,r._)("span",null,(0,u.zw)(o.name),1),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f)])),_:1})],10,Ce)))),128))]),(0,r.Wm)(v,{class:"flex_all_center mt20","current-page":e.pageData.pageNo,"onUpdate:current-page":o[2]||(o[2]=o=>e.pageData.pageNo=o),"page-size":e.pageData.pageSize,"onUpdate:page-size":o[3]||(o[3]=o=>e.pageData.pageSize=o),background:"",layout:"sizes,prev, pager, next,total",total:e.pageData.total,onSizeChange:e.changePagination,onCurrentChange:e.changePagination},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])),_:1})])),_:1}),(0,r.Wm)(b,{class:"ml10",span:15},{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.wy)((0,r._)("div",null,[(0,r.Wm)(s,{"show-checkbox":"","model-value":"authority"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{label:"授权到权限",name:"authority"})])),_:1})],512),[[N.F8,"people"==e.activeName]]),(0,r.wy)((0,r._)("div",null,[(0,r.Wm)(s,{"show-checkbox":"",modelValue:e.activeRoleTabName,"onUpdate:modelValue":o[4]||(o[4]=o=>e.activeRoleTabName=o)},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{label:"关联到权限",name:"relationAuthority"}),(0,r.Wm)(m,{label:"授权到账户",name:"authUser"},{default:(0,r.w5)((()=>[(0,r.Wm)(y)])),_:1})])),_:1},8,["modelValue"])],512),[[N.F8,"second"==e.activeName]]),(0,r.wy)((0,r.Wm)(k,{ref:"authority_tree",data:e.menuResources,"default-expand-all":!0,"node-key":"name",props:e.defaultProps,"default-checked-keys":e.activeTreeKey,"show-checkbox":""},null,8,["data","props","default-checked-keys"]),[[N.F8,"people"==e.activeName||"relationAuthority"==e.activeRoleTabName]])])])),_:1})])),_:1})])),_:1})])),_:1},16,["onConfirmSubmit"])}const Se={class:"control_header"},We=(0,r.Uk)("批量授权"),De=(0,r.Uk)("批量取消"),Ne=(0,r.Uk)("关联用户"),Te=(0,r.Uk)("取消关联");function Re(e,o,l,t,u,i){const d=n.mi,m=g.Z,s=a.$Y,c=a.eI,p=we.R;return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(m,{options:e.formOptions,formInfo:e.formData,onSubmit:e.searchUser},{default:(0,r.w5)((()=>[(0,r._)("div",Se,[(0,r.Wm)(d,{type:"primary",onClick:o[0]||(o[0]=o=>e.submitMultipleEdit(1))},{default:(0,r.w5)((()=>[We])),_:1}),(0,r.Wm)(d,{type:"danger",onClick:o[1]||(o[1]=o=>e.submitMultipleEdit(2))},{default:(0,r.w5)((()=>[De])),_:1})])])),_:1},8,["options","formInfo","onSubmit"]),(0,r.Wm)(c,{data:e.tableData,border:!0,ref:"multipleTableRef"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{type:"selection",width:"45"}),(0,r.Wm)(s,{prop:"user",label:"用户名"}),(0,r.Wm)(s,{prop:"role",label:"角色"}),(0,r.Wm)(s,{fixed:"right",label:"操作",width:"320"},{default:(0,r.w5)((({row:o})=>[(0,r.Wm)(d,{link:"",type:"primary",size:"small",onClick:l=>e.submitUserChagneAuth([o.user],1)},{default:(0,r.w5)((()=>[Ne])),_:2},1032,["onClick"]),(0,r.Wm)(d,{link:"",type:"danger",size:"small",onClick:l=>e.submitUserChagneAuth([o.user],2)},{default:(0,r.w5)((()=>[Te])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,r.Wm)(p,{class:"flex_all_center mt20","current-page":e.pageData.pageNo,"onUpdate:current-page":o[2]||(o[2]=o=>e.pageData.pageNo=o),"page-size":e.pageData.pageSize,"onUpdate:page-size":o[3]||(o[3]=o=>e.pageData.pageSize=o),background:"",layout:"sizes,prev, pager, next,total",total:e.pageData.total,onSizeChange:e.changePagination,onCurrentChange:e.changePagination},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}var Ve=(0,r.aZ)({components:{templateForm:g.Z},setup(){let e=(0,b.iH)([{user:"Huang",role:"admin"}]),o=(0,b.iH)({}),l=(0,b.iH)(),t=(0,b.qj)({pageNo:1,limit:10,pageSize:10,total:20});const a=e=>{console.log(e,"结果")},n=(e=G)=>{let o=l.value&&l.value.getSelectionRows(),t=o.reduce(((e,o)=>(e.push(o.user),e)),[]);console.log(t,"多选")},r=(e,o=G)=>{1===o||de.T.confirm("确定是否接触绑定",{type:"warning"}).then((()=>{})).catch((()=>({})))},u=()=>{let{pageNo:e,pageSize:o}=t;console.log(e,o,"页码")},i={labelWidth:0,items:[{controlType:"input",placeholder:"搜索账号",keyName:"user"}],btns:[{eventName:"submit",type:"primary",text:"搜素"}]};return{tableData:e,formOptions:i,formData:o,pageData:t,multipleTableRef:l,searchUser:a,submitMultipleEdit:n,submitUserChagneAuth:r,changePagination:u}}});const Ie=(0,_.Z)(Ve,[["render",Re],["__scopeId","data-v-16af0dda"]]);var Ue=Ie,Ae=l(2748),He=(0,r.aZ)({components:{DrawerComponents:w.Z,ArrowRight:Ae.olP,RoleAuthBeUserModelVue:Ue},props:{value:Boolean,modelType:{type:Number,default:1},modelInfo:Object},emits:["update:modelValue","submitSuccss"],setup(e,{emit:o}){let l=(0,b.iH)("people"),t=(0,b.iH)([]),a=(0,b.iH)(""),n=(0,b.iH)(),u=(0,b.iH)([{name:"用户1"},{name:"用户2"},{name:"用户3"}]),i=(0,b.iH)(""),d={children:"children",label:"title"},m=(0,b.qj)({pageNo:1,limit:10,pageSize:10,total:0}),s=(0,b.qj)({userList:[]}),c=(0,b.qj)({activeRoleTabName:"authUser",roleList:[]}),p=["resources/menuResources"],f=(0,L.XP)(p);const h=e=>{let o="people"===l.value?1:2;console.log(e,o,"类型"),i.value=e},w=()=>{console.log(l.value,a,"当前")},v=()=>{let{pageNo:e,pageSize:o}=m;console.log(e,o,l.value,"页面")},g=()=>{console.log(n.value&&n.value.getCheckedKeys(),"获取选中节点")};return(0,r.YP)(l,(e=>{console.log(e,"新数据"),m.pageNo=1}),{immediate:!0}),(0,r.YP)(u,(()=>{if(u.value.length>0){let e=u.value[0].name;i.value=e,h(e)}}),{immediate:!0}),{activeName:l,activeTreeKey:t,currentSideList:u,defaultProps:d,authority_tree:n,pageData:m,searchValue:a,currentSeleteName:i,menuResources:f.menuResources,...f,...(0,b.BK)(c),...(0,b.BK)(s),Search:Ae.olm,confirmSubmit:g,getRelevantAuthList:h,searchContent:w,changePagination:v}}});const Ze=(0,_.Z)(He,[["render",Me],["__scopeId","data-v-52da2554"]]);var ze=Ze,Ee={components:{AddAndEditAppModel:M,ResourcesManager:Q,RoleManager:pe,AuthManager:ze},setup(){let e=(0,b.iH)(!1),o=(0,b.iH)(!1),l=(0,b.iH)({}),t=(0,b.iH)(1),a=(0,b.iH)([{date:"2016-05-03",name:"Tom",address:"No. 189, Grove St, Los Angeles"}]),n=(0,b.iH)(!1),r=(0,b.iH)([]),u=(0,b.iH)(!1),i=(0,b.iH)();const d=()=>{u.value=!u.value},m=(e,a=1)=>{a&&(t.value=a),l.value=e?(0,Y.I8)(e):{},o.value=!o.value},s=()=>{e.value=!e.value},c=()=>{n.value=!n.value},p=e=>{console.log(e,"提交内容")};return{tableData:a,showResourcesModel:e,showEditModel:o,editFormInfo:l,modelType:t,showRoldModel:n,roldData:r,showAuthModel:u,authAppid:i,submitInfo:p,addAndEditApp:m,openResourcesModel:s,openRoleModel:c,openAuthModel:d}}};const Oe=(0,_.Z)(Ee,[["render",h],["__scopeId","data-v-6bee7c98"]]);var Pe=Oe},3069:function(e,o,l){l(1758),l(3877)}}]);
//# sourceMappingURL=406.00134326.js.map