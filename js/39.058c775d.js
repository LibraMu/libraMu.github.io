"use strict";(self["webpackChunkidaas_admin"]=self["webpackChunkidaas_admin"]||[]).push([[39],{6837:function(e,t,n){n.d(t,{Pe:function(){return i},XP:function(){return o}});var a=n(3396),l=n(6534);const o=e=>{const t=e.reduce(((e,t)=>{let n=t.split("/"),o=n.pop()||"";return o&&(e[o]=n[0]?(0,a.Fl)((()=>l.Z.state[n[0]][o])):(0,a.Fl)((()=>l.Z.state[o]))),e}),{});return t},i=e=>{const t=e.reduce(((e,t)=>{let n=t,a=t.split("/").pop()||0;return a&&(e[a]=e=>l.Z.dispatch(n,e)),e}),{});return t}},7274:function(e,t,n){n.d(t,{A:function(){return a}});const a={inline:!0,rules:{},items:[{controlType:"input",keyName:"name",label:"关键字"}],btns:[{label:" ",eventName:"submit",text:"搜索",type:"primary"},{eventName:"reset",text:"重置",type:"primary"}]}},7862:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(3396),l=n(4870),o=n(4386),i=n(508),s=(0,a.aZ)({__name:"addAndEditPublicModel",props:{value:Boolean,modelInfo:{reqired:!0,type:Object},modelType:{type:Number,default:1},modelOptions:{require:!0,type:Object},title:{type:String,default:"资源"}},emits:["update:modelValue","submitSuccss"],setup(e,{emit:t}){const n=e,{modelInfo:s}=(0,l.BK)(n);let r=(0,l.iH)();const c=()=>{r.value?.validate((e=>{console.log(e,"提交表单"),t("submitSuccss",e,n.modelType)}))},u=()=>{r.value.resetFields(),t("update:modelValue",!1)};return(t,n)=>((0,a.wg)(),(0,a.j4)(o.Z,(0,a.dG)(t.$attrs,{title:1!=e.modelType?`修改${e.title}`:`新增${e.title}`,onConfirmSubmit:c,onClosedModel:u}),{default:(0,a.w5)((()=>[(0,a.Wm)(i.Z,{ref_key:"formDOM",ref:r,options:e.modelOptions,formInfo:(0,l.SU)(s)},null,8,["options","formInfo"])])),_:1},16,["title"]))}});const r=s;var c=r},7039:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var a=n(4143),l=(n(7437),n(6355)),o=(n(3069),n(3209)),i=(n(6905),n(9971)),s=(n(1430),n(9007),n(5791)),r=(n(6809),n(3396)),c=n(7139),u=n(4870),d=n(508),p=n(7862),m=n(7178),y=n(2655),g=n(6837),f=n(7274),w=n(6766);const b={inline:!1,labelWidth:120,rules:{name:{required:!0},displayName:{required:!0},secret:{required:!0}},items:[{controlType:"input",keyName:"name",label:"Name"},{controlType:"input",keyName:"displayName",label:"DisplayName"},{controlType:"input",keyName:"secret",label:"Secret"},{controlType:"input",keyName:"description",label:"Description"},{controlType:"input",keyName:"allowedAccessTokenSigningAlgorithms",label:"AllowedAccessTokenSigningAlgorithms"},{controlType:"switch",keyName:"enabled",label:"Enabled"},{controlType:"switch",keyName:"showInDiscoveryDocument",label:"ShowInDiscoveryDocument"}]},v={class:"flex_space_between"},k=(0,r.Uk)("添加"),_={class:"container"},S={class:"container-body"},N={class:"container-content"},h={class:"content-table"},I=(0,r.Uk)("是"),U=(0,r.Uk)("否"),A=(0,r.Uk)("是"),T=(0,r.Uk)("否"),W=(0,r.Uk)("编辑 "),z=(0,r.Uk)("删除 "),D={class:"content-pagination"};var C=(0,r.aZ)({__name:"apiResource",setup(e){const t=["identity/getIdentApiResourceList","identity/editIdentApiResource","identity/addtIdentApiResource","identity/deleteIdentApiResource"],n=(0,g.Pe)(t),C=(0,u.qj)({pageNo:1,limit:0,pageSize:10,total:0});let j=(0,u.qj)({name:""}),R=(0,u.iH)([]),q=(0,u.iH)(!1),Z=(0,u.iH)(1),O=(0,u.iH)({id:"",name:"",secret:"",displayName:"",enabled:!1,description:"",showInDiscoveryDocument:!1,allowedAccessTokenSigningAlgorithms:""});const x=()=>{let{pageNo:e,pageSize:t}=C;console.log(e,t,"页码"),H()},$=e=>{Object.keys(e).forEach((t=>{j[t]=e[t]})),C.pageNo=1,H()},H=()=>{const e={filter:j.name||null,pageIndex:C.pageNo,pageSize:C.pageSize};n.getIdentApiResourceList(e).then((e=>{R.value=e.data||[],C.total=e.totalCount,0===R.value.length&&C.pageNo>1&&(C.pageNo--,H())}))},V=e=>{Z.value=2,q.value=!0,setTimeout((()=>O.value=(0,w.I8)(e)),0)},P=(e,t)=>{let a=(0,u.IU)(O.value),l=Object.keys(a).reduce(((t,n)=>(t[n]=e[n],t)),{});1===t&&delete l.id;const o=1===t?n.addtIdentApiResource:n.editIdentApiResource;o(l).then((e=>{(0,m.z8)({message:"操作成功",type:"success"}),q.value=!1,H()}))},E=e=>{console.log(e,"？？"),y.T.confirm("是否要删除该identity资源？","提示",{type:"warning"}).then((()=>{n.deleteIdentApiResource({id:e}).then((()=>{(0,m.z8)({type:"success",message:"删除成功"}),H()}))})).catch((()=>({})))};return H(),(e,t)=>{const n=s.mi,m=o.$Y,y=i.Ks,g=o.eI,w=l.R,H=a.Kf;return(0,r.wg)(),(0,r.j4)(H,{class:"full_container"},{header:(0,r.w5)((()=>[(0,r._)("div",v,[(0,r._)("span",null,(0,c.zw)(e.$router.currentRoute.value.meta&&e.$router.currentRoute.value.meta.title||""),1),(0,r.Wm)(n,{type:"success",onClick:t[0]||(t[0]=e=>((0,u.dq)(q)?q.value=!0:q=!0,(0,u.dq)(Z)?Z.value=1:Z=1))},{default:(0,r.w5)((()=>[k])),_:1})])])),default:(0,r.w5)((()=>[(0,r._)("div",_,[(0,r.Wm)(d.Z,{formInfo:(0,u.SU)(j),options:(0,u.SU)(f.A),onSubmit:$},null,8,["formInfo","options"]),(0,r._)("div",S,[(0,r._)("div",N,[(0,r._)("div",h,[(0,r.Wm)(g,{data:(0,u.SU)(R)},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{prop:"name",label:"Name","align-items":"center"}),(0,r.Wm)(m,{prop:"displayName",label:"DisplayName","align-items":"center"}),(0,r.Wm)(m,{label:"启用","align-items":"center"},{default:(0,r.w5)((e=>[e.row.enabled?((0,r.wg)(),(0,r.j4)(y,{key:0,type:"success"},{default:(0,r.w5)((()=>[I])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,type:"danger"},{default:(0,r.w5)((()=>[U])),_:1}))])),_:1}),(0,r.Wm)(m,{prop:"description",label:"Description","align-items":"center"}),(0,r.Wm)(m,{label:"ShowInDiscovery","align-items":"center"},{default:(0,r.w5)((e=>[e.row.showInDiscoveryDocument?((0,r.wg)(),(0,r.j4)(y,{key:0,type:"success"},{default:(0,r.w5)((()=>[A])),_:1})):((0,r.wg)(),(0,r.j4)(y,{key:1,type:"danger"},{default:(0,r.w5)((()=>[T])),_:1}))])),_:1}),(0,r.Wm)(m,{label:"操作",width:"180","align-items":"center"},{default:(0,r.w5)((e=>[(0,r.Wm)(n,{type:"primary",onClick:t=>V(e.row),text:""},{default:(0,r.w5)((()=>[W])),_:2},1032,["onClick"]),(0,r.Wm)(n,{type:"danger",onClick:t=>E(e.row.id),text:""},{default:(0,r.w5)((()=>[z])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,r._)("div",D,[(0,r.Wm)(w,{class:"flex_all_center mt20","current-page":C.pageNo,"onUpdate:current-page":t[1]||(t[1]=e=>C.pageNo=e),"page-size":C.pageSize,"onUpdate:page-size":t[2]||(t[2]=e=>C.pageSize=e),background:"",layout:"sizes,prev, pager, next,total",total:C.total,onSizeChange:x,onCurrentChange:x},null,8,["current-page","page-size","total"])])])])]),(0,r.Wm)(p.Z,{modelValue:(0,u.SU)(q),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,u.dq)(q)?q.value=e:q=e),modelInfo:(0,u.SU)(O),modelType:(0,u.SU)(Z),modelOptions:(0,u.SU)(b),onSubmitSuccss:P},null,8,["modelValue","modelInfo","modelType","modelOptions"])])),_:1})}}});const j=C;var R=j},3069:function(e,t,n){n(1758),n(3877)}}]);
//# sourceMappingURL=39.058c775d.js.map